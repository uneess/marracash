"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),PropTypes=_interopDefault(require("prop-types"));function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(t.push(c.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return t}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function createCommonjsModule(e,r){return e(r={exports:{}},r.exports),r.exports}var accounting=createCommonjsModule(function(e,r){!function(t,n){var o={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},a=Array.prototype.map,c=Array.isArray,u=Object.prototype.toString;function i(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function s(e){return c?c(e):"[object Array]"===u.call(e)}function l(e){return e&&"[object Object]"===u.call(e)}function p(e,r){var t;for(t in e=e||{},r=r||{})r.hasOwnProperty(t)&&null==e[t]&&(e[t]=r[t]);return e}function f(e,r,t){var n,o,c=[];if(!e)return c;if(a&&e.map===a)return e.map(r,t);for(n=0,o=e.length;n<o;n++)c[n]=r.call(t,e[n],n,e);return c}function m(e,r){return e=Math.round(Math.abs(e)),isNaN(e)?r:e}function y(e){var r=o.settings.currency.format;return"function"==typeof e&&(e=e()),i(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:i(r)?o.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r}:r}var d=o.unformat=o.parse=function(e,r){if(s(e))return f(e,function(e){return d(e,r)});if("number"==typeof(e=e||0))return e;r=r||o.settings.number.decimal;var t=new RegExp("[^0-9-"+r+"]",["g"]),n=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(t,"").replace(r,"."));return isNaN(n)?0:n},h=o.toFixed=function(e,r){r=m(r,o.settings.number.precision);var t=Math.pow(10,r);return(Math.round(o.unformat(e)*t)/t).toFixed(r)},g=o.formatNumber=o.format=function(e,r,t,n){if(s(e))return f(e,function(e){return g(e,r,t,n)});e=d(e);var a=p(l(r)?r:{precision:r,thousand:t,decimal:n},o.settings.number),c=m(a.precision),u=e<0?"-":"",i=parseInt(h(Math.abs(e||0),c),10)+"",y=i.length>3?i.length%3:0;return u+(y?i.substr(0,y)+a.thousand:"")+i.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+a.thousand)+(c?a.decimal+h(Math.abs(e),c).split(".")[1]:"")},b=o.formatMoney=function(e,r,t,n,a,c){if(s(e))return f(e,function(e){return b(e,r,t,n,a,c)});e=d(e);var u=p(l(r)?r:{symbol:r,precision:t,thousand:n,decimal:a,format:c},o.settings.currency),i=y(u.format);return(e>0?i.pos:e<0?i.neg:i.zero).replace("%s",u.symbol).replace("%v",g(Math.abs(e),m(u.precision),u.thousand,u.decimal))};o.formatColumn=function(e,r,t,n,a,c){if(!e)return[];var u=p(l(r)?r:{symbol:r,precision:t,thousand:n,decimal:a,format:c},o.settings.currency),h=y(u.format),b=h.pos.indexOf("%s")<h.pos.indexOf("%v"),v=0,M=f(e,function(e,r){if(s(e))return o.formatColumn(e,u);var t=((e=d(e))>0?h.pos:e<0?h.neg:h.zero).replace("%s",u.symbol).replace("%v",g(Math.abs(e),m(u.precision),u.thousand,u.decimal));return t.length>v&&(v=t.length),t});return f(M,function(e,r){return i(e)&&e.length<v?b?e.replace(u.symbol,u.symbol+new Array(v-e.length+1).join(" ")):new Array(v-e.length+1).join(" ")+e:e})},e.exports&&(r=e.exports=o),r.accounting=o}()}),accounting_1=accounting.accounting,formatMoney=function(e,r){var t=r.symbol,n=r.precision,o=r.thousand,a=r.decimal;return accounting.formatMoney(e,t,n,o,a)},formatNumber=function(e,r){var t=r.precision,n=r.thousand,o=r.decimal;return accounting.formatNumber(e,t,n,o)},getFormattedPrice=function(e,r,t){var n=r.decimal,o=r.precision;if(e||0===e){"number"==typeof e&&(e=e.toString());var a=(0===o?e.includes(".")||e.includes(","):e.includes(".")&&e.includes(","))?accounting.unformat(e.replace(/-/g,""),n):e.replace(",",".").replace(/-/g,"");return t?formatMoney(a,r):formatNumber(a,r)}};function useDebounce(e,r){var t=_slicedToArray(React.useState(e),2),n=t[0],o=t[1];return React.useEffect(function(){var t=setTimeout(function(){o(e)},r);return function(){clearTimeout(t)}},[e]),n}function Marracash(e){var r=e.className,t=e.style,n=e.placeholder,o=e.defaultValue,a=e.currency,c=e.showSymbol,u=_slicedToArray(React.useState(getFormattedPrice(o,a,c)),2),i=u[0],s=u[1],l=useDebounce(i,1e3),p=function(e,r){return e?parseFloat((100*accounting.unformat(e,r)).toFixed(2)):0};return React.useEffect(function(){var r,t,n=(r=l,t=getFormattedPrice(accounting.unformat(r,a.decimal),a,c),{isFormatted:r.includes(a.symbol),reformat:t!==r}),o=n.reformat;!n.isFormatted||o?function(){var r=e.currency,t=e.showSymbol,n=e.allowEmpty,o=i;n||o||0===o||(o=0);var a=getFormattedPrice(o,r,t);o!==a&&s(a)}(o&&p(l,a.decimal)):function(r){var t=e.currency;e.onChange(p(r,t.decimal))}(l)},[l]),React__default.createElement("input",{style:t,placeholder:n,className:r,onChange:function(e){var r=e.target.value;return s(r)},value:i})}Marracash.defaultProps={onChange:function(){},currency:{decimal:",",thousand:".",symbol:"â‚¬",precision:2},showSymbol:!0,defaultValue:0,className:"vx-price-input",style:{},placeholder:"",allowEmpty:!0},Marracash.propTypes={currency:PropTypes.object,onChange:PropTypes.func,showSymbol:PropTypes.bool,defaultValue:PropTypes.number,className:PropTypes.string,style:PropTypes.object,id:PropTypes.string,placeholder:PropTypes.string,allowEmpty:PropTypes.bool},exports.default=Marracash;
